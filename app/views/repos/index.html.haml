.container
  %h2= "#{@repo.title} #{t('.commits_benchmark')}"

  %table.table.table-striped
    %thead
      %th= Benchmark.human_attribute_name(:label)
      %th= t('.sparklines')
    %tbody
      - @charts.each do |label, outputs|
        %tr
          %td
            %h5= link_to label, commits_path(organization_name: @organization.name,
              repo_name: @repo.name,
              benchmark_label: label)

          %td
            - outputs.each do |chart|
              %h5= chart[:result_type]

              .sparkline{ data: { columns: chart[:columns].to_json } }
                .spinner2
                  .bounce1
                  .bounce2
                  .bounce3

:javascript
  $(function() {
    drawSparkline('.sparkline');
    var called = false;

    $(window).on('scroll', function() {
      if (called) return;
      called = true;

      setTimeout(function() {
        drawSparkline('.sparkline', function() { called = false; });
      }, 10);
    });
  });
